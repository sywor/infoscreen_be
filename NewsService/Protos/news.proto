syntax = "proto3";

option csharp_namespace = "NewsService";

import "google/protobuf/empty.proto";

package news;

service NewsFetcher {
    rpc GetAllArticles (google.protobuf.Empty) returns (stream Article);
    rpc GetNextArticle (google.protobuf.Empty) returns (Article);
    rpc GetStatus (google.protobuf.Empty) returns (Status);
}

enum StatusCode {
    Failure = 0;
    Fetching = 1;
    Ready = 2;
}

message Status {
    string Message = 1;
    StatusCode Code = 2;
}

message Article {
    string title = 1;
    int64 fetched_unix = 2;
    int64 published_unix = 3;
    bytes image = 4;
    string body = 5;
}