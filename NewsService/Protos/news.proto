syntax = "proto3";

option csharp_namespace = "NewsService";

import "google/protobuf/empty.proto";

package news;

service NewsFetcher {
    rpc GetAllArticles (google.protobuf.Empty) returns (stream ArticleResponse);
    rpc GetArticle (ArticleRequest) returns (ArticleResponse);
}

message ArticleRequest {
    string articleKey = 1;
}

enum StatusCode {
    Failure = 0;
    Fetching = 1;
    Ok = 2;
}

message Status {
    string Message = 1;
    StatusCode Code = 2;
}

message Article {
    string title = 1;
    int64 fetched_unix = 2;
    int64 published_unix = 3;
    string imagePath = 4;
    string body = 5;
    string source = 6;
}

message ArticleResponse {
    oneof response {
        Article article = 1;
        Status status = 2;
    }
}